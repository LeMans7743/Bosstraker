<script src="https://www.gstatic.com/firebasejs/9.6.11/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.11/firebase-messaging-compat.js"></script>
<script>
  const firebaseConfig = {
  apiKey: "AIzaSyC6mq6ukjzpNmaIy5dLewwHqrJTTpaB2jA",
  authDomain: "bosstrackerweb.firebaseapp.com",
  projectId: "bosstrackerweb",
  storageBucket: "bosstrackerweb.firebasestorage.app",
  messagingSenderId: "620047423570",
  appId: "1:620047423570:web:2d1881a9edc1a1b6cba78b"
  };

  firebase.initializeApp(firebaseConfig);
  const messaging = firebase.messaging();

  // 註冊 Service Worker
  if ("serviceWorker" in navigator) {
    navigator.serviceWorker.register("/firebase-messaging-sw.js")
      .then((registration) => {
        console.log("Service Worker 已註冊", registration);
        messaging.useServiceWorker(registration);
      });
  }

  // 申請通知權限
  function requestPermission() {
    Notification.requestPermission().then((permission) => {
      if (permission === "granted") {
        messaging.getToken({ vapidKey: "BBQv_vF-t2r8ALxzDZj9xcSlsrJbJ73nI19w6YeLZVdoLERxBJ88NI8pucgS9xN2_KO-osGLJ-oHLpLNcYZbEQc" })
          .then((currentToken) => {
            console.log("裝置 Token:", currentToken);
            alert("通知已啟用！");
          });
      }
    });
  }

  // 測試通知
  function testNotification() {
    new Notification("測試通知", { body: "Boss Timer 測試成功！" });
  }
</script>

<button onclick="requestPermission()">啟用通知</button>
<button onclick="testNotification()">測試通知</button>
