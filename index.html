<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.11/firebase-app.js";
  import { getMessaging, getToken, onMessage } from "https://www.gstatic.com/firebasejs/9.6.11/firebase-messaging.js";

  const firebaseConfig = {
  apiKey: "AIzaSyC6mq6ukjzpNmaIy5dLewwHqrJTTpaB2jA",
  authDomain: "bosstrackerweb.firebaseapp.com",
  projectId: "bosstrackerweb",
  storageBucket: "bosstrackerweb.firebasestorage.app",
  messagingSenderId: "620047423570",
  appId: "1:620047423570:web:2d1881a9edc1a1b6cba78b",
  measurementId: "G-9Y5MM0C4Y8"
  };

  const app = initializeApp(firebaseConfig);
  const messaging = getMessaging(app);

  // å–å¾— Token (æ‰‹æ©Ÿ B å°ˆç”¨)
  getToken(messaging, { vapidKey: "BBQv_vF-t2r8ALxzDZj9xcSlsrJbJ73nI19w6YeLZVdoLERxBJ88NI8pucgS9xN2_KO-osGLJ-oHLpLNcYZbEQc" })
    .then((currentToken) => {
      if (currentToken) {
        console.log("å–å¾—æ‰‹æ©Ÿ B çš„ Token:", currentToken);
        alert("ä½ çš„é€šçŸ¥ Token:\n" + currentToken);
      } else {
        alert("æ²’æœ‰æ‹¿åˆ° Tokenï¼Œå¯èƒ½æ²’é–‹é€šçŸ¥æ¬Šé™");
      }
    })
    .catch((err) => {
      console.error("ç„¡æ³•å–å¾— Token", err);
    });

  // å‰æ™¯é€šçŸ¥
  onMessage(messaging, (payload) => {
    console.log("å‰æ™¯æ”¶åˆ°è¨Šæ¯:", payload);
    alert("ğŸ”” " + payload.notification.title + "\n" + payload.notification.body);
  });
</script>
