<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.11/firebase-app.js";
  import { getMessaging, getToken, onMessage } from "https://www.gstatic.com/firebasejs/9.6.11/firebase-messaging.js";

  const firebaseConfig = {
  apiKey: "AIzaSyC6mq6ukjzpNmaIy5dLewwHqrJTTpaB2jA",
  authDomain: "bosstrackerweb.firebaseapp.com",
  projectId: "bosstrackerweb",
  storageBucket: "bosstrackerweb.firebasestorage.app",
  messagingSenderId: "620047423570",
  appId: "1:620047423570:web:2d1881a9edc1a1b6cba78b",
  measurementId: "G-9Y5MM0C4Y8"
  };

  const app = initializeApp(firebaseConfig);
  const messaging = getMessaging(app);

  // 取得 Token (手機 B 專用)
  getToken(messaging, { vapidKey: "BBQv_vF-t2r8ALxzDZj9xcSlsrJbJ73nI19w6YeLZVdoLERxBJ88NI8pucgS9xN2_KO-osGLJ-oHLpLNcYZbEQc" })
    .then((currentToken) => {
      if (currentToken) {
        console.log("取得手機 B 的 Token:", currentToken);
        alert("你的通知 Token:\n" + currentToken);
      } else {
        alert("沒有拿到 Token，可能沒開通知權限");
      }
    })
    .catch((err) => {
      console.error("無法取得 Token", err);
    });

  // 前景通知
  onMessage(messaging, (payload) => {
    console.log("前景收到訊息:", payload);
    alert("🔔 " + payload.notification.title + "\n" + payload.notification.body);
  });
</script>
